<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <template id="report_property_offers">
        <t t-foreach="docs" t-as="property">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2>
                            <span t-field="property.name"/>
                        </h2>
                        <div name="intro">
                            <strong>Salesman: </strong><span t-field="property.seller_id.name" /><br/>
                            <strong>Expected Price: </strong><span t-field="property.expected_price"/><br/>
                            <strong>Status: </strong><span t-field="property.state" /><br />
                        </div>
                        <div>
                            <div t-if="property.state == 'new'">
                                <br />
                                <br/>
                                <h4>There are no offers for this property</h4>
                            </div>
                            <div t-else="">
                                <br/>
                                <br/>
                                <t t-call="real_estate.offers_table"></t>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- separating the table templates -->
    <template id="offers_table">
        <table class="table">
            <thead>
                <tr>
                    <th>Price</th>
                    <th>Partner</th>
                    <th>Validity(Days)</th>
                    <th>Deadline</th>
                    <th>State</th>
                </tr>
            </thead>
            <tbody>
                <t t-set="offers" t-value="property.mapped('offer_ids')"/>
                <div>
                    <div>
                        <tr t-foreach="offers" t-as="offer">
                            <td>
                                <span t-field="offer.price"/>
                            </td>
                            <td>
                                <span t-field="offer.partner_id" />
                            </td>
                            <td>
                                <span t-field="offer.validity" />
                            </td>
                            <td>
                                <span t-field="offer.date_deadline"/>
                            </td>
                            <td>
                                <span t-field="offer.status" />
                            </td>
                        </tr>
                    </div>
                </div>
            </tbody>
        </table>
    </template>


    <!-- creating reporting template for the res.users -->
    <template id="report_all_the_properties"> 
        <t t-foreach="docs" t-as="user">
            <t t-call="web.html_container">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2><strong>Salesman : </strong><span t-field="user.name" /></h2>
                        <div>
                            <t t-set="properties" t-value="user.mapped('property_ids')"/>
                                <t t-foreach="properties" t-as="property">
                                    <div>
                                        <h4><strong><span t-field="property.name" /></strong></h4>
                                        <strong>Expected Price: </strong><span t-field="property.expected_price" /><br/>
                                        <strong>Status: </strong><span t-field="property.state" />
                                    </div>
                                    <div>
                                        <div t-if="property.state == 'new'">
                                            <br/>
                                            <br />
                                            <h6>There are no offers for this property</h6>
                                            <br />
                                            <br />
                                        </div>
                                        <div t-else="">
                                            <br/>
                                            <br/>
                                            <t t-call="real_estate.offers_table"></t>
                                            <br />
                                            <br />
                                        </div>
                                    </div>
                                </t>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>



    <!-- template for the web content -->
    <template id="real_estate_web_view">
        <t t-call="website.layout">
            <title>Estate Property</title>
            <div class="oe_structure">
                <div class="container">
                        <div class="row">
                                <t t-foreach="properties" t-as="property">
                                    <div class="col-3 lg-3">
                                        <a t-attf-href="/real_estate/{{ slug(property) }}" style="text-decoration:none;">
                                            <div class="card m-5" style="width: 18rem;  opacity: 0.85;" onmouseover="this.style.scale=1.1, this.style.opacity=1" onmouseout="this.style.scale=1, this.style.opacity=0.85">
                                                <img t-esc="property.image" class="card-img-top img-responsive" t-options="{'widget': 'image'}"/>
                                                <div class="card-body">
                                                    <h5 class="card-title"><t t-esc="property.name"/></h5>
                                                    <p class="card-text text-muted">Some quick example text to build on the card title and make up the bulk of the card's content.
                                                        <br/><br/><strong>â‚¹ <t t-esc="property.expected_price"/></strong>
                                                    </p>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </t>
                        </div>

                        <!-- pager -->
                
                        <div t-if="pager" class="o_portal_pager d-flex justify-content-center m-5" >
                            <t t-call="website.pager"/>
                        </div>
                </div>
            </div>
        </t>
    </template>

    <template id="web_view_estate_page">
        <t t-call="website.layout">
            <div class="oe_structure">
                    <div class="container pt-3" >
                        Hello World! What's up
                        <div><t t-esc="property.image" t-options="{'widget': 'image'}" style="object-fit: cover; width: 2rem; height: 1rem;" /></div>
                    </div>
                    <div class="content">
                        <h1><t t-esc="property.name"/></h1>
                    </div>
            </div>
        </t>
    </template>
</odoo>